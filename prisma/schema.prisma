generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mongodb"
  url      = env("DATABASE_URL")
}

model UAH_to_Currency {
  cc            String  @id @map("_id")
  rate          Float
  updatedAt     DateTime @default(now()) @updatedAt
}

model User {
  id         String   @id @map("_id")

  name       String?
  username   String?

  photo_url String?

  preferred_currency   String? @default("UAH")

  expenses   Expense[]
}

enum SOURCE_TYPE {
  TEXT
  VOICE
  PHOTO
  DOCUMENT
}

enum EXPENSE_MAIN_CATEGORY {
  HOUSING         // аренда, коммуналка
  TRANSPORT       // такси, транспорт, авто
  FOOD            // продукты, рестораны
  HEALTH          // медицина, аптека
  PERSONAL        // одежда, уход, личные покупки
  ENTERTAINMENT   // досуг, игры, развлечения
  TRAVEL          // поездки, отдых
  FINANCIAL       // кредиты, налоги, сбережения
  FAMILY_PETS     // дети, семья, животные
  OTHER           // всё, что не вошло
}

enum EXPENSE_SUB_CATEGORY {
  // HOUSING
  RENT
  MORTGAGE
  UTILITIES
  SUBSCRIPTIONS
  INSURANCE
  REPAIRS

  // TRANSPORT
  TAXI
  PUBLIC_TRANSPORT
  FUEL
  CAR_MAINTENANCE
  CAR_INSURANCE
  PARKING

  // FOOD
  GROCERIES
  DINING_OUT
  COFFEE_SNACKS
  FAST_FOOD

  // HEALTH
  MEDICINES
  DOCTOR
  PERSONAL_CARE_SERVICES

  // PERSONAL
  CLOTHING
  COSMETICS
  PERSONAL_SHOPPING
  SELF_EDUCATION
  SELF_DEVELOPMENT

  // ENTERTAINMENT
  MOVIES_CONCERTS
  COMPUTER_GAMES
  ALCOHOL
  SMOKING
  GAMBLING
  HOBBIES

  // TRAVEL
  HOTELS
  FLIGHTS
  TOURS_ACTIVITIES
  TRAVEL_RESTAURANTS
  TRAVEL_TRANSPORT

  // FINANCIAL
  LOAN
  TAXES
  SAVINGS_INVESTMENTS
  BANK_FEES

  // FAMILY
  CHILDREN
  EDUCATION
  HOME_PETS
  DONATIONS_PRESENTS

  // OTHER
  FORCED_PURCHASES
  EMOTIONAL_PURCHASES
  OTHER
}


model Expense {
  id               String   @id @default(auto()) @map("_id") @db.ObjectId

  date             DateTime @default(now())

  amount_original     Float
  currency_original   String

  amount_in_preferred_currency   Float?

  main_category     EXPENSE_MAIN_CATEGORY
  sub_category      EXPENSE_SUB_CATEGORY

  merchant         String

  source           SOURCE_TYPE

  userId           String
  user             User     @relation(fields: [userId], references: [id])
}